#+TITLE: Razor 1.0 Release Checklist
#+AUTHOR: Razor Team
#+DATE: 2024

* 1.0 Release Blockers
* TODO enable multi select on icon view

** DONE allow modification to file list view preset (list, grid...)
   :PROPERTIES:
   :COMPLETED: 2024-12-03
   :END:

   Implemented list/grid view toggle with configurable persistence.

*** Implementation
    - Added ViewMode type (ViewModeList, ViewModeGrid) in internal/ui/types.go
    - Added viewMode field to FileListConfig in internal/config/config.go
    - Added toggle button in navbar (internal/ui/layout_navbar.go)
    - Created grid layout in internal/ui/layout_grid.go
    - View mode persists to config.json
** DONE External Drag and Drop Support
   :PROPERTIES:
   :PRIORITY: A
   :COMPLETED: 2024-12-03
   :END:

   Support for dragging files from outside the application (Finder, Explorer, etc.) into Razor.

*** Implementation (macOS only)
    - Used Objective-C runtime to add NSDraggingDestination methods to GioView at runtime
    - No fork of Gio required - uses AppKitViewEvent to get NSView pointer
    - Files are copied to current directory when dropped

*** Technical Details
    - =internal/platform/drop_darwin.m= - Objective-C code using class_addMethod
    - =internal/platform/drop_darwin.go= - Go/cgo wrapper and callback handler
    - =internal/platform/drop_other.go= - Stub for non-macOS platforms
    - Captures AppKitViewEvent in event loop to get NSView handle
    - Registers view for NSPasteboardTypeFileURL drag type
    - Adds draggingEntered: and performDragOperation: methods at runtime

*** Completed Tasks
    - [X] Implemented without Gio fork using runtime method injection
    - [X] Implemented drop target registration for entire window
    - [X] Handle drop to copy files to current directory
    - [X] Tested on macOS

*** Notes
    - Windows/Linux not yet implemented (would need similar platform-specific code)
    - Uses modern NSPasteboardTypeFileURL API instead of deprecated NSFilenamesPboardType

** DONE Size Column Display Bug
   :PROPERTIES:
   :PRIORITY: B
   :END:

   Size column text gets cut off when displaying values like "MB" or larger units.

*** Symptoms
    - File size display truncates unit suffix (e.g., "1.2 M" instead of "1.2 MB")
    - Column width may not be adequate for larger size values

*** Resolution
    - Increased minimum size column width from 50px to 70px to fit "999.9 GB"
    - File: internal/ui/renderer_rows.go:118-120
